<!DOCTYPE html>
<html>
<head>
  <title>Assign Drivers</title>
  <link rel="stylesheet" href="style.css">
  <style>
    body { font-family: Arial; padding: 20px; }
    .logo { height: 60px; margin-bottom: 20px; }
    table { border-collapse: collapse; width: 100%; }
    th, td { border: 1px solid black; padding: 8px; text-align: left; }
    input { width: 100%; }
    button { margin-top: 20px; padding: 10px 20px; font-size: 16px; }
  </style>
</head>
<body>

  <img src="assets/company-logo.png" class="logo">

  <h2>Assign Drivers & File Codes</h2>

  <table>
    <tr>
      <th>Truck</th>
      <th>Driver</th>
      <th>File Code</th>
      <th>Shift</th>
    </tr>
    <tbody id="assignTable"></tbody>
  </table>

  <button onclick="finish()">Done</button>

  <script>
    const trucks = JSON.parse(localStorage.getItem('selectedTrucks')) || [];
    const assignTable = document.getElementById('assignTable');

    trucks.forEach(truck => {
      const row = document.createElement('tr');
      row.innerHTML = `
        <td>${truck} <img src="assets/rmb-mixer.png" style="height:20px;"></td>
        <td><input type="text" placeholder="Driver"></td>
        <td><input type="text" placeholder="File Code"></td>
        <td>
          <select>
            <option value="Morning">Morning</option>
            <option value="Night">Night</option>
            <option value="Double">Double Shift</option>
          </select>
        </td>
      `;
      assignTable.appendChild(row);
    });

    function finish() {
      const data = [];
      Array.from(assignTable.rows).forEach(row => {
        data.push({
          truck: row.cells[0].innerText.trim(),
          driver: row.cells[1].querySelector('input').value.trim(),
          file: row.cells[2].querySelector('input').value.trim(),
          shift: row.cells[3].querySelector('select').value
        });
      });
      localStorage.setItem('reportData', JSON.stringify(data));
      window.location.href = 'report.html';
    }
  </script>

</body>
</html>
